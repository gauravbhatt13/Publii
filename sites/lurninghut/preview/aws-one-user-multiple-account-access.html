<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>AWS one user multiple account access - lurninghut</title><meta name="description" content="Very often many organisations will hit a point where they need to manage a set of users and a set of AWS accounts together. One way is to have separate users created in each account for every developer and then you can imagine how cumbersome&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-one-user-multiple-account-access.html"><link rel="amphtml" href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/amp/aws-one-user-multiple-account-access.html"><link rel="alternate" type="application/atom+xml" href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/feed.xml"><link rel="alternate" type="application/json" href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/feed.json"><meta property="og:title" content="AWS one user multiple account access"><meta property="og:site_name" content="lurninghut"><meta property="og:description" content="Very often many organisations will hit a point where they need to manage a set of users and a set of AWS accounts together. One way is to have separate users created in each account for every developer and then you can imagine how cumbersome&hellip;"><meta property="og:url" content="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-one-user-multiple-account-access.html"><meta property="og:type" content="article"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/assets/css/style.css?v=38656b64ea4fdbda631e7059ddbb6972"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-one-user-multiple-account-access.html"},"headline":"AWS one user multiple account access","datePublished":"2021-09-13T02:38","dateModified":"2021-09-13T17:00","description":"Very often many organisations will hit a point where they need to manage a set of users and a set of AWS accounts together. One way is to have separate users created in each account for every developer and then you can imagine how cumbersome&hellip;","author":{"@type":"Person","name":"Gaurav Bhatt"},"publisher":{"@type":"Organization","name":"Gaurav Bhatt"}}</script><script>(function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2634784,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q4E1CEG1ZW"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q4E1CEG1ZW');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-9BBBNE2CKT"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9BBBNE2CKT');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/index.html">lurninghut</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/tags/java/index.html" title="Test Attribute" target="_self">Java</a></li><li><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/tags/aws/index.html" target="_self">AWS</a></li><li><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/tags/unix/index.html" target="_self">Unix</a></li><li><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/tags/networking/index.html" target="_self">Networking</a></li><li><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/tags/git/index.html" target="_self">GIT</a></li><li><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/tags/security/index.html" target="_self">Security</a></li><li><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/tags/kafka/index.html" target="_self">Kafka</a></li></ul></nav></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/website/front.png" srcset="file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/website/responsive/front-xs.png 300w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/website/responsive/front-sm.png 480w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/website/responsive/front-md.png 768w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/website/responsive/front-lg.png 1024w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/website/responsive/front-xl.png 1360w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/website/responsive/front-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-09-13T02:38">September 13, 2021</time></div><h1>AWS one user multiple account access</h1><div class="post__meta post__meta--author"><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/authors/technobot/index.html" class="feed__author invert">Gaurav Bhatt</a></div></div></header></div><div class="wrapper post__entry"><p>Very often many organisations will hit a point where they need to manage a set of users and a set of AWS accounts together. One way is to have separate users created in each account for every developer and then you can imagine how cumbersome it can become.</p><table style="border-collapse: collapse; width: 100%;" border="1"><tbody><tr><td style="width: 34.081%;">AWS Account 1</td><td style="width: 31.5123%;">AWS Account 2</td><td style="width: 34.4067%;">AWS Account 3</td></tr><tr><td style="width: 34.081%;">John Doe</td><td style="width: 31.5123%;">John Doe</td><td style="width: 34.4067%;">John Doe</td></tr><tr><td style="width: 34.081%;">Peter Doe</td><td style="width: 31.5123%;">Peter Doe</td><td style="width: 34.4067%;">Peter Doe</td></tr><tr><td style="width: 34.081%;">...</td><td style="width: 31.5123%;">...</td><td style="width: 34.4067%;">...</td></tr></tbody></table><p>As the table shows above, for each developer to access resources in every other account, they need to manage 3 set of credentials in their <a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-credentials.html" target="_blank" rel="noopener noreferrer">credentials</a> file and keep switching while programmatically accessing the resources.</p><h4>Solution provided by AWS </h4><p>All programmatic access to your AWS resources takes place via an API call, and all API calls must be <a href="http://docs.aws.amazon.com/general/latest/gr/signing_aws_api_requests.html" target="_blank" rel="noopener noreferrer">signed</a> for authentication and authorization. To sign an AWS API call, you need AWS access keys. Therefore, having multiple users across AWS accounts also can pose a challenge because more users can result in maintaining more AWS access keys. Furthermore, it’s important that you protect them. One way of reducing the number of credentials to manage is to leverage temporary AWS security credentials. You can do this by using AWS Security Token Service (STS) and IAM <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html" target="_blank" rel="noopener noreferrer">roles</a>.</p><p> </p><figure class="post__image"><img loading="lazy" src="file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/posts/9/Screenshot-2021-09-13-at-2.32.32-AM.png" sizes="(max-width: 48em) 100vw, 768px" srcset="file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/posts/9/responsive/Screenshot-2021-09-13-at-2.32.32-AM-xs.png 300w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/posts/9/responsive/Screenshot-2021-09-13-at-2.32.32-AM-sm.png 480w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/posts/9/responsive/Screenshot-2021-09-13-at-2.32.32-AM-md.png 768w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/posts/9/responsive/Screenshot-2021-09-13-at-2.32.32-AM-lg.png 1024w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/posts/9/responsive/Screenshot-2021-09-13-at-2.32.32-AM-xl.png 1360w, file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/media/posts/9/responsive/Screenshot-2021-09-13-at-2.32.32-AM-2xl.png 1600w" alt="" width="1262" height="608"></figure><p>To explain the image above, lets break down the pieces:</p><ul><li>There are two AWS accounts Dev and Prod where an <a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-iam-service.html">IAM user</a> in Dev account needs access to a resource e.g. EC2 machine provisioned in Prod account.</li><li>Dev account user will use its own <a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-credentials.html">credentials</a> to call IAM/STS service's <a href="https://aws.amazon.com/premiumsupport/knowledge-center/iam-assume-role-cli/" target="_blank" rel="noopener noreferrer">assume role operation</a> with request to assume role (Privileged Access Role shown in the image) present in Prod account.</li><li>STS service will then verify the request by checking the policy attached with the role including the trust policy and on successful verification will return a set of temporary credentials. By default, temporary security credentials for an IAM user are valid for a <strong>maximum of 12 hours</strong>. But you can request a duration as short as 15 minutes or as long as 36 hours using the DurationSeconds parameter. For security reasons, a token for an AWS account root user is restricted to a duration of one hour.</li></ul></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on September 13, 2021</p><ul class="post__tag"><li><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/tags/aws/index.html">AWS</a></li></ul><div class="post__share"></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/switch-jdk-version-in-macos.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Manage JDK version in MacOS </a></div><div class="post__nav-next"><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-iam-temporary-vs-long-term-credentials.html" class="invert post__nav-link" rel="next"><span>Next</span> AWS IAM: Temporary vs Long term credentials </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2021-09-15T23:04" class="feed__date">September 15, 2021</time></div><h3 class="h1"><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-question-answers.html" class="invert">AWS Account,User, Roles difference</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2021-09-12T10:15" class="feed__date">September 12, 2021</time></div><h3 class="h1"><a href="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/aws-iam-service.html" class="invert">Difference between Root user and IAM user</a></h3></article></div></div></main><footer class="footer"><div class="footer__copyright"><p>Contact - lurninghut@gmail.com</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="file:///Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/assets/js/svg-map.js?v=350bb511eba46f390e88bbea74abb0ac"></script><script defer="defer" src="file:////Users/lurning.hut/Documents/Publii/sites/lurninghut/preview/assets/js/svg-fix.js?v=7c0d2bb7276904b382e80bf2d85e8a96"></script></body></html>