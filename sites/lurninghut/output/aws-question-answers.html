<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>AWS Account,User, Roles difference - lurninghut</title><meta name="description" content="IAM is a global service which is sitting at the centre stage of whole AWS infrastructure and is responsible for access and security of users and resources. It is very important for customers and developers to understand the bits and pieces of IAM in order&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://lurninghut.com/aws-question-answers.html"><link rel="amphtml" href="https://lurninghut.com/amp/aws-question-answers.html"><link rel="alternate" type="application/atom+xml" href="https://lurninghut.com/feed.xml"><link rel="alternate" type="application/json" href="https://lurninghut.com/feed.json"><meta property="og:title" content="AWS Account,User, Roles difference"><meta property="og:site_name" content="lurninghut"><meta property="og:description" content="IAM is a global service which is sitting at the centre stage of whole AWS infrastructure and is responsible for access and security of users and resources. It is very important for customers and developers to understand the bits and pieces of IAM in order&hellip;"><meta property="og:url" content="https://lurninghut.com/aws-question-answers.html"><meta property="og:type" content="article"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://lurninghut.com/assets/css/style.css?v=38656b64ea4fdbda631e7059ddbb6972"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://lurninghut.com/aws-question-answers.html"},"headline":"AWS Account,User, Roles difference","datePublished":"2021-09-15T23:04","dateModified":"2021-09-22T07:31","description":"IAM is a global service which is sitting at the centre stage of whole AWS infrastructure and is responsible for access and security of users and resources. It is very important for customers and developers to understand the bits and pieces of IAM in order&hellip;","author":{"@type":"Person","name":"Gaurav Bhatt"},"publisher":{"@type":"Organization","name":"Gaurav Bhatt"}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q4E1CEG1ZW"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q4E1CEG1ZW');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://lurninghut.com/">lurninghut</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://lurninghut.com/tags/java/" title="Test Attribute" target="_self">Java</a></li><li><a href="https://lurninghut.com/tags/aws/" target="_self">AWS</a></li><li><a href="https://lurninghut.com/tags/unix/" target="_self">Unix</a></li><li><a href="https://lurninghut.com/tags/networking/" target="_self">Networking</a></li><li><a href="https://lurninghut.com/tags/git/" target="_self">GIT</a></li><li><a href="https://lurninghut.com/tags/security/" target="_self">Security</a></li></ul></nav></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://lurninghut.com/media/website/front.png" srcset="https://lurninghut.com/media/website/responsive/front-xs.png 300w, https://lurninghut.com/media/website/responsive/front-sm.png 480w, https://lurninghut.com/media/website/responsive/front-md.png 768w, https://lurninghut.com/media/website/responsive/front-lg.png 1024w, https://lurninghut.com/media/website/responsive/front-xl.png 1360w, https://lurninghut.com/media/website/responsive/front-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-09-15T23:04">September 15, 2021</time></div><h1>AWS Account,User, Roles difference</h1><div class="post__meta post__meta--author"><a href="https://lurninghut.com/authors/technobot/" class="feed__author invert">Gaurav Bhatt</a></div></div></header></div><div class="wrapper post__entry"><p><span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit;">IAM is a global service</span><span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);"> which is sitting at the centre stage of whole AWS infrastructure and is responsible for access and security of users and resources. It is very important for customers and developers to understand the bits and pieces of IAM in order to ensure safe handling of their AWS accounts which otherwise might easily get compromised. Please note that following terms are very different and should <strong>not be used interchangeably</strong>:</span></p><h4><span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">account, user, role, access_key_id, secret_access_key</span><span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);"><br><br></span>High level view of IAM</h4><p>Below is a list of IAM users from an individual account. Note that every <strong><em>user</em></strong> has access key ID and there can be multiple access key ids for 1 <a href="https://lurninghut.com/aws-iam-service.html" target="_blank" rel="noopener noreferrer">IAM User</a>. Now imagine that AWS has over <strong>1 million active customers, </strong>and since every customer can have more than 1 AWS account which means there are definitely more than 1 million accounts in AWS IAM service to manage. For every account there can be many IAM users like below and thus as many more access keys and secrets.</p><p><img loading="lazy" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2017/07/10/img-02-rm0517-b-071017.png" data-is-external-image="true" alt="New Information in the AWS IAM Console Helps You Follow IAM Best Practices  | AWS Security Blog"></p><h4>The Developer view</h4><p>Every developer will have access key and secret configured in <a href="#INTERNAL_LINK#/post/null" target="_blank" rel="noopener noreferrer">credential</a> file present in the home directory of their development environment. Remember a developer is independent of AWS IAM and can have credentials configured for multiple IAM user belonging to different AWS accounts. A typical config and credential file may look like :</p><p><img loading="lazy" src="https://stuzio.com/wp-content/uploads/2019/02/AWAS-CLI-Config-Files-1024x550.png" data-is-external-image="true" alt="How to Install and Configure AWS CLI on MacOS – Part 2 – Stuzio"></p><p>The above credential file shows 2 sets of credentials configured by the developer and can be switched while calling AWS services using 'profile' option.</p><pre>aws s3 ls<br><br>aws s3 ls --profile MyAdmin</pre><p>So far our picture looks like as follows:</p><p>1 developer -&gt; Multiple Credentials (Multiple Accounts)</p><figure class="post__image"><img loading="lazy" src="https://lurninghut.com/media/posts/14/iamusers-2.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://lurninghut.com/media/posts/14/responsive/iamusers-2-xs.png 300w, https://lurninghut.com/media/posts/14/responsive/iamusers-2-sm.png 480w, https://lurninghut.com/media/posts/14/responsive/iamusers-2-md.png 768w, https://lurninghut.com/media/posts/14/responsive/iamusers-2-lg.png 1024w, https://lurninghut.com/media/posts/14/responsive/iamusers-2-xl.png 1360w, https://lurninghut.com/media/posts/14/responsive/iamusers-2-2xl.png 1600w" alt="" width="1024" height="550"></figure><p>One important thing to note that the above credentials shown are known as <a href="https://lurninghut.com/aws-iam-temporary-vs-long-term-credentials.html" target="_blank" rel="noopener noreferrer">long term credentials.</a> </p><h4>The Machine View - Here comes Roles</h4><p>Developer accesses AWS services by using AWS CLI or AWS SDK for different platforms like Java/Python/Node which refer to the credentials file as shown above to grab the credentials and call AWS services. Lets see the problem with this:</p><p>Such a setup is ok when the developer is running programs from a very personal machine or laptop as there can be some level of security that can be assumed but what about organisations with 100 developers. Are they going to create 100 set of long term credentials and manage them from IAM console ? Not a good idea. </p><p>Another scenario is even for one set of credential, what if the developer wants to run a piece of AWS SDK based application in 10 different EC2 instances. In every instance those credentials should be copied. There must be a better way of doing it.</p><p>What if there is a mobile app which needs to access AWS services and for that app there are 1000 users. It will not be wise to bundle long term credentials in mobile app.</p><p>AWS provides IAM roles to be created for such scenarios but unlike IAM Users, such roles will have temporary credentials which can are not generated by IAM console, instead AWS STS service is called to get the temporary credentials.</p><h4>STS and Roles chemistry</h4><p>STS service (by default a global service but can be configured with region endpoints) has assume role action which is called by the client which need temporary credentials for any role they want to assume. For example if all the developers want to assume a 'dev' role created in IAM roles then they will call STS which will verify the trust relationship of the role with the client. Every role while being created in IAM will provide a trust policy specifying Principal who can assume the role like any specific user in any account or an EC2 service. The image below shows cross account access using IAM roles to allow user Joe in a different account to access Dynamo DB in another account.</p><p><img loading="lazy" src="https://media.amazonwebservices.com/blog/iam_delegate_cross_account_api_access_1.png" data-is-external-image="true" alt="Delegating API Access to AWS Services Using IAM Roles | AWS News Blog"></p><p> </p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on September 22, 2021</p><ul class="post__tag"><li><a href="https://lurninghut.com/tags/aws/">AWS</a></li></ul><div class="post__share"></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://lurninghut.com/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://lurninghut.com/awk-pattern-scanning-and-processing.html" class="invert post__nav-link" rel="prev"><span>Previous</span> awk pattern scanning and processing</a></div><div class="post__nav-next"><a href="https://lurninghut.com/http-basics.html" class="invert post__nav-link" rel="next"><span>Next</span> HTTP Basics </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://lurninghut.com/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2021-09-12T10:15" class="feed__date">September 12, 2021</time></div><h3 class="h1"><a href="https://lurninghut.com/aws-iam-service.html" class="invert">Difference between Root user and IAM user</a></h3></article></div></div></main><footer class="footer"><div class="footer__copyright"><p>Contact - lurninghut@gmail.com</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://lurninghut.com/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://lurninghut.com/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>